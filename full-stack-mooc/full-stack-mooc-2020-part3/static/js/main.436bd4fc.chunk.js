(this.webpackJsonpkurssitiedot_part2=this.webpackJsonpkurssitiedot_part2||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),c=t.n(r),o=t(2),l=function(e){return u.a.createElement("form",{onSubmit:e.addPerson},"name:",u.a.createElement("input",{value:e.newName,onChange:e.handleNameChange}),u.a.createElement("div",null,"number:",u.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))},i=function(e){return e.personsToShow.map((function(n){return u.a.createElement("li",{key:n.name}," ",n.name," ",n.number,u.a.createElement("button",{onClick:function(){return e.removePerson(n)}},"delete"))}))},m=function(e){return u.a.createElement("input",{value:e.searchInput,onChange:e.handleInputChange})},s=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"error"},n)},f=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"notification"},n)},d=t(3),h=t.n(d),v="http://localhost:3001/api/persons",b=function(){return h.a.get(v).then((function(e){return e.data}))},p=function(e){return h.a.post(v,e).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(v,"/").concat(e)).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),d=Object(o.a)(c,2),h=d[0],v=d[1],g=Object(a.useState)(""),j=Object(o.a)(g,2),O=j[0],C=j[1],N=Object(a.useState)(""),S=Object(o.a)(N,2),y=S[0],k=S[1],T=Object(a.useState)(null),I=Object(o.a)(T,2),P=I[0],D=I[1],J=Object(a.useState)(null),L=Object(o.a)(J,2),_=L[0],x=L[1];Object(a.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var A=t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(f,{message:P}),u.a.createElement(s,{message:_}),u.a.createElement("div",null,"Search with name:",u.a.createElement(m,{searchInput:y,handleInputChange:function(e){console.log(e.target.value),k(e.target.value)}}),u.a.createElement("h2",null,"Add a new"),u.a.createElement(l,{newNumber:O,newName:h,handleNameChange:function(e){console.log(e.target.value),v(e.target.value)},handleNumberChange:function(e){console.log(e.target.value),C(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:h,number:O};if(t.map((function(e){return e.name})).includes(h)){if(window.confirm("Do you really want to replace ".concat(n.name," with new number?"))){var a=t.find((function(e){return e.name===h}));E(a.id,n).then((function(e){r(t.map((function(n){return n.id===a.id?e:n}))),v(""),C(""),D("".concat(a.name," was updated")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){x("".concat(a.name," was already removed from server")),setTimeout((function(){x(null)}),5e3)}))}}else p(n).then((function(e){r(t.concat(e)),v(""),C(""),D("".concat(e.name," was created")),setTimeout((function(){D(null)}),5e3)}))}})),u.a.createElement("h2",null,"Numbers"),u.a.createElement("ul",null,u.a.createElement(i,{personsToShow:A,removePerson:function(e){window.confirm("Do you really want to delete ".concat(e.name))&&w(e.id).then((function(n){var a;r((a=e,t.filter((function(e){return e!==a})))),D("".concat(e.name," was deleted")),setTimeout((function(){D(null)}),5e3)})).catch((function(n){x("".concat(e.name," was already removed from server")),setTimeout((function(){x(null)}),5e3)}))}})))};t(36);c.a.render(u.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.436bd4fc.chunk.js.map