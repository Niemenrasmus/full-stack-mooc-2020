{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Power User\\\\documents\\\\full-stack-mooc-2020\\\\part2\\\\puhelinluettelo\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport DisplayPerson from './components/Persons';\nimport FilterPersons from './components/Filter';\nimport AddPerson from './components/AddPerson';\nimport personService from './services/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState(['']);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setNewFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(response => setPersons(response)).catch(error => console.log(error));\n  }, []);\n\n  const showMessage = (message, error) => {\n    setNotification(message);\n    setError(error);\n    setTimeout(() => {\n      setNotification(null);\n      setError(null);\n    }, 5000);\n  };\n\n  const addPerson = event => {\n    event.preventDefault();\n    const person = {\n      name: newName,\n      number: newNumber\n    };\n    const find_person = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n\n    if (find_person) {\n      alert(`${newName} is already added to phonebook. Should the name be replaced?`);\n      personService.update(find_person.id, person).then(response => {\n        setPersons(persons.filter(p => p.name !== person.name).concat(response));\n        setNewName('');\n        setNewNumber('');\n        showMessage(`Päivitettiin ${person.name}`);\n      }).catch(error => {\n        showMessage(error.response.data.error.message, true);\n      });\n    } else {\n      personService.create(person).then(response => {\n        setPersons(persons.concat(person));\n        setNewName('');\n        setNewNumber('');\n        showMessage(`${person.name} was added to yours phonenook`);\n      }).catch(error => {\n        showMessage(error.response.data.error.message, true);\n      });\n    }\n  };\n\n  const removePerson = (event, name) => {\n    event.preventDefault();\n    const person = persons.find(person => person.name === name);\n\n    if (person) {\n      if (window.confirm(`Should ${person.name} be removed`)) {\n        personService.remove(person.id).then(response => {\n          setPersons(persons.filter(p => p.id !== person.id));\n          showMessage(`${person.name} was removed`);\n        }).catch(error => {\n          showMessage(`${person.name} doesn't exist in phonebook`, true);\n          setPersons(persons.filter(p => p.id !== person.id));\n          console.log(error);\n        });\n      }\n    }\n  };\n\n  const filteredPersons = filter ? persons.filter(person => {\n    return person.name.toLowerCase().includes(filter.toLowerCase());\n  }) : persons;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(FilterPersons, {\n    setFilter: setNewFilter,\n    filter: filter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, \"Add new contact\"), /*#__PURE__*/React.createElement(AddPerson, {\n    addPerson: addPerson,\n    setNewName: setNewName,\n    setNewNumber: setNewNumber,\n    newName: newName,\n    newNumber: newNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, \"Contacts\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, filteredPersons.map((person, i) => /*#__PURE__*/React.createElement(DisplayPerson, {\n    persons: filteredPersons,\n    removePerson: removePerson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Power User/documents/full-stack-mooc-2020/part2/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","DisplayPerson","FilterPersons","AddPerson","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setNewFilter","notification","setNotification","error","setError","getAll","then","response","catch","console","log","showMessage","message","setTimeout","addPerson","event","preventDefault","person","name","number","find_person","find","toLowerCase","alert","update","id","p","concat","data","create","removePerson","window","confirm","remove","filteredPersons","includes","map","i"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport DisplayPerson from './components/Persons'\nimport FilterPersons from './components/Filter'\nimport AddPerson from './components/AddPerson'\nimport personService from './services/persons'\n\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([''])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setNewFilter  ] = useState('')\n  const [notification, setNotification] = useState(null)\n  const [error, setError] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => setPersons(response))\n      .catch(error => console.log(error))\n  }, [])\n\n  const showMessage = (message, error) => {\n    setNotification(message)\n    setError(error)\n\n    setTimeout(() => {\n      setNotification(null)\n      setError(null)\n    }, 5000)\n  }\n\n  const addPerson = event => {\n    event.preventDefault()\n\n    const person = {\n        name: newName,\n        number : newNumber\n    }\n\n    const find_person = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n    \n    if (find_person) {\n      alert(`${newName} is already added to phonebook. Should the name be replaced?`)\n      personService\n        .update(find_person.id, person)\n        .then(response => {\n          setPersons(persons\n            .filter(p => p.name !== person.name)\n            .concat(response)\n          )\n          setNewName('')\n          setNewNumber('')\n          showMessage(`Päivitettiin ${person.name}`)\n        })\n        .catch(error => {\n          showMessage(error.response.data.error.message, true)\n        })\n    }\n    else {\n      personService\n        .create(person)\n        .then(response => {\n          setPersons(persons.concat(person))\n          setNewName('')\n          setNewNumber('')\n          showMessage(`${person.name} was added to yours phonenook`)\n        })\n        .catch(error => {\n          showMessage(error.response.data.error.message, true)\n        })\n    }\n  }\n\n  const removePerson = (event, name) => {\n    event.preventDefault()\n    const person = persons.find(person => person.name === name)\n    if (person) {\n      if (window.confirm(`Should ${person.name} be removed`)) {\n        personService\n          .remove(person.id)\n          .then(response => {\n            setPersons(persons.filter(p => p.id !== person.id))\n            showMessage(`${person.name} was removed`)\n          })\n          .catch(error => {\n            showMessage(`${person.name} doesn't exist in phonebook`, true)\n            setPersons(persons.filter(p => p.id !== person.id))\n            console.log(error)\n          })\n      }\n    }\n  }\n\n  const filteredPersons = filter\n    ? persons.filter(person => { \n      return person.name.toLowerCase().includes(filter.toLowerCase())\n    })\n    : persons\n\n\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <FilterPersons setFilter = {setNewFilter} filter = {filter}/>\n      <h2>Add new contact</h2>\n      <AddPerson \n      addPerson = {addPerson}\n      setNewName = {setNewName}\n      setNewNumber = {setNewNumber}\n      newName = {newName}\n      newNumber = {newNumber}\n      />  \n      <h2>Contacts</h2>\n      <ul>\n      {filteredPersons.map((person, i) =>\n      <DisplayPerson persons={filteredPersons} removePerson={removePerson} />\n      )}\n      </ul>\n    </div>\n  )\n\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}